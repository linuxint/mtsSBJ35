# Cursor AI 프로젝트 마이그레이션을 위한 프롬프트

## 프로젝트 개요
Spring MVC + JSP 애플리케이션을 React + Spring Boot REST API 아키텍처로 마이그레이션해야 합니다. 마이그레이션에는 다음이 포함됩니다:

1. 백엔드를 Spring MVC에서 Spring Boot REST API로 전환
2. 프론트엔드를 JSP에서 TypeScript를 사용한 React로 전환
3. 데이터베이스를 Oracle에서 PostgreSQL로 마이그레이션
4. 모놀리식 아키텍처를 프론트엔드와 백엔드로 분리

## 참조 문서
마이그레이션 계획을 설명하는 여러 참조 문서가 있습니다:
1. `outline.md` - 고수준 마이그레이션 계획
2. `backend.md` - 상세 백엔드 아키텍처 설계
3. `backend_file.md` - 변경 대상 파일
4. `backend_config.md` - Spring Boot를 위한 설정 변경 사항
5. `backend_security.md` - 보안 설정 및 JWT 구현
6. `backend_service.md` - 서비스 계층 변경 및 비즈니스 로직 업데이트
7. `backend_controller.md`, `backend_dto.md` 등 - 각 백엔드 컴포넌트에 대한 상세 명세
8. `front.md` - 상세 프론트엔드 아키텍처 설계
9. `front_list.md` - React 컴포넌트로 변환할 JSP 파일 목록 및 마이그레이션 전략

## 문서화된 파일
이미 마이그레이션이 필요한 많은 파일을 문서화했습니다. 이들은 `backend_file.md`에서 다음과 같이 분류됩니다:
1. 변경이 필요한 파일 (상세 마이그레이션 계획 포함)
2. 변경 없이 사용할 수 있는 파일
3. 아직 문서화가 필요한 파일

지금까지 완료된 문서화 작업은 다음과 같습니다:
- 구성 설정 (Redis, Cache, Elasticsearch)
- 환경별 구성
- 보안 확장 및 권한 어노테이션
- 애플리케이션 이벤트 리스너
- 메일 모듈 확장
- QR 코드 기능

## 프론트엔드 마이그레이션 계획
`front_list.md` 문서를 기반으로 JSP 파일을 React 컴포넌트로 변환하기 위한 포괄적인 계획을 구성했습니다:

### JSP 파일 구성
90개 이상의 JSP 파일을 기능별 그룹으로 분류했습니다:
1. 레이아웃 및 공통 컴포넌트
2. 일정 관리
3. 게시판 관리
4. 메일 시스템
5. 사용자 관리
6. 팝업 및 유틸리티
7. 관리자 기능
8. 검색 기능
9. 프로젝트 관리
10. CRUD 예제
11. 메인 화면
12. 에러 페이지
13. 결재 시스템
14. 정적 파일 및 템플릿

### React 컴포넌트 구조
마이그레이션은 다음과 같은 컴포넌트 기반 아키텍처를 따릅니다:
- 기능별로 `/components` 폴더에 재사용 가능한 컴포넌트 배치
- 완전한 뷰를 구성하기 위해 `/pages`에 페이지 컴포넌트 배치
- UI 컴포넌트와 로직 간의 관심사 분리
- 기존 기능을 반영하는 명확한 폴더 구조

### 마이그레이션 우선순위
프론트엔드 마이그레이션은 다음 순서를 따릅니다:
1. **1단계 (2주)**: 핵심 인프라 및 공통 컴포넌트
   - 레이아웃 컴포넌트 (헤더, 푸터, 네비게이션)
   - 공통 UI 컴포넌트 (페이지네이션, 메시지, 로딩)
   - 인증 관련 컴포넌트
   - 에러 페이지
   
2. **2단계 (4주)**: 주요 비즈니스 모듈
   - 게시판 관련 컴포넌트
   - 일정 관리 컴포넌트
   - 사용자 관리 컴포넌트
   
3. **3단계 (4주)**: 보조 비즈니스 모듈
   - 메일 시스템 컴포넌트
   - 결재 시스템 컴포넌트
   - 프로젝트 관리 컴포넌트
   
4. **4단계 (2주)**: 관리자 및 보조 기능
   - 관리자 기능 컴포넌트
   - 검색 기능
   - 팝업 및 유틸리티 컴포넌트

### 기술 구현 전략
마이그레이션에는 다음과 같은 상세 전략이 포함됩니다:
- Zustand를 사용한 상태 관리
- React Hook Form 및 Zod를 사용한 폼 처리
- React Router를 사용한 라우팅
- Styled-components 또는 TailwindCSS를 사용한 스타일링
- Axios와 React Query를 사용한 API 통신
- Jest와 Storybook을 사용한 컴포넌트 테스트

## 백엔드 마이그레이션 상세 계획

### 공통 모듈 변경
- Java 유틸리티 클래스를 프론트엔드용 TypeScript로 변환
- XSS 방지를 위한 HTML 이스케이프 유틸리티 구현
- Java 8 API를 사용한 날짜 유틸리티 개선
- 보안 및 오류 처리가 향상된 파일 처리 유틸리티 업데이트
- 적절한 유효성 검사가 있는 문자열 유틸리티 재구성
- 트리 구조 기능을 TypeScript로 변환
- 더 나은 오류 관리로 JSON 처리 개선
- 최신 보안 모범 사례가 적용된 JWT 유틸리티 구현
- PII 데이터를 위한 포괄적인 마스킹 유틸리티 추가

### 설정 변경
- 새로운 어노테이션(@EnableAsync, @EnableCaching)으로 애플리케이션 진입점 업데이트
- WebMvcConfigurerAdapter를 WebMvcConfigurer로 대체
- JWT 기반 보안 구성 구현
- 향상된 타입 처리 및 캐싱으로 MyBatis 구성 개선
- 감사 기능이 있는 JPA 구성 추가
- REST API 액세스를 위한 CORS 구성 업데이트
- Swagger를 SpringDoc OpenAPI로 대체
- 속도 제한 구성 구현
- 애플리케이션 이벤트 리스너 통합
- Redis 및 Cache 구성 추가
- Elasticsearch 통합 구현
- 환경별 구성 프로필 추가
- 이메일 템플릿용 Thymeleaf 구성 구현
- XSS 방지 구성 추가
- Git 통합 구성 구현

### 보안 구현
- 세션 기반에서 JWT 기반 인증으로 전환
- 무상태 아키텍처를 위한 Spring Security 구성 업데이트
- JWT 토큰 생성, 검증 및 갱신 메커니즘 추가
- JWT 검증을 위한 요청 필터 구현
- CORS 구성 업데이트
- 역할 기반 액세스 제어로 권한 부여 강화
- BCrypt를 사용한 비밀번호 암호화 개선
- 세션 만료 처리 추가
- 사용자 정의 인증 성공 핸들러 구현
- 역할 및 권한 엔터티 정의
- 사용자 정의 보안 어노테이션(@AdminAuthorize, @UserAuthorize 등) 추가
- 역할 기반 URL 매핑 로더 구현

### 컨트롤러 변환
- 모든 MVC 컨트롤러를 REST 컨트롤러로 변환
- JSP 뷰 반환을 JSON 응답으로 대체
- OpenAPI 문서화 어노테이션 추가
- 표준화된 응답 형식 구현
- 파일 업로드/다운로드 엔드포인트 업데이트
- 적절한 유효성 검사 처리 추가
- RESTful URL 구조 구현
- 목록 작업에 페이징 지원 추가
- 보안 어노테이션 업데이트
- 응답에 적절한 HTTP 상태 코드 구현
- 필요한 경우 버전 관리 지원 추가

### DTO 구현
- 별도의 Request/Response DTO 생성
- Bean Validation 어노테이션 추가
- 모든 DTO에 Builder 패턴 구현
- OpenAPI 문서화 어노테이션 추가
- JSON 직렬화를 위한 순환 참조 제거
- 적절한 페이지네이션 지원이 있는 검색 요청 객체 생성
- 필요한 경우 사용자 정의 직렬화/역직렬화 추가

### 엔티티 변경
- MyBatis와 JPA를 모두 지원하도록 VO 업데이트
- 적절한 어노테이션 추가
- equals/hashCode/toString 메서드 구현
- Serializable 인터페이스 추가
- Builder 패턴 구현
- Java 8 Time API로 날짜 처리 수정
- 엔티티 간 적절한 관계 구현
- 감사 필드(생성/업데이트 타임스탬프) 구현

### 예외 처리
- 표준화된 ErrorResponse 구조 생성
- 전역 예외 처리 구현
- 비즈니스별 예외 추가
- 유효성 검사 예외 처리 추가
- 보안 예외 처리 구현
- 사용자 정의 JWT 인증 예외 생성
- 모든 예외에 대한 적절한 로깅 추가
- 적절한 HTTP 상태 코드 반환

### 리포지토리 변환
- 필요한 경우 JPA에서 MyBatis로 변환
- 매퍼 어노테이션 업데이트
- 동적 쿼리 구현
- 페이징 지원 추가
- PostgreSQL 호환성을 위한 결과 매핑 업데이트
- 적절한 트랜잭션 관리 구현
- 일괄 작업 지원 추가
- 쿼리 성능 최적화

### 서비스 계층 변경
- DTO-Entity 변환 로직 추가
- 비즈니스 유효성 검사 구현
- 비즈니스 로직을 컨트롤러에서 서비스로 이동
- 트랜잭션 관리 추가
- 적절한 경우 캐싱 구현
- 크로스커팅 관심사를 위한 이벤트 발행 추가
- 필요한 경우 비동기 처리 구현
- 적절한 오류 처리 추가

## 현재 프로젝트 구조
현재 프로젝트는 JSP 뷰를 사용하는 Spring MVC 애플리케이션입니다. 주요 패키지는 다음과 같습니다:
- `/src/main/java/com/devkbil/mtssbj` - 메인 애플리케이션 코드
  - `/admin` - 관리자 기능
  - `/board` - 게시판 기능
  - `/common` - 공통 유틸리티
  - `/config` - 구성
  - `/crud` - CRUD 작업
  - `/develop` - 테스트 코드
  - `/error` - 오류 처리
  - `/etc` - 기타 기능
  - `/mail` - 메일 기능
  - `/main` - 메인 애플리케이션
  - `/member` - 회원 관리
  - `/monitor` - 모니터링
  - `/project` - 프로젝트 관리
  - `/schedule` - 일정 관리
  - `/search` - 검색 기능
  - `/sign` - 인증
- `/src/main/webapp` - JSP 뷰
- `/src/main/resources` - 구성 및 정적 리소스

## 필요한 변경 사항

### 백엔드 변경 사항
1. Spring MVC 컨트롤러를 JSP 뷰 대신 JSON을 반환하는 REST 컨트롤러로 변환
2. `backend_security.md`에 명시된 대로 세션 기반 인증을 대체하는 JWT 기반 인증 구현
3. `backend.md`에 따라 패키지 구조 재구성
4. PostgreSQL을 위한 MyBatis 쿼리 최적화
5. REST API를 위한 적절한 오류 처리 및 응답 형식 구현
6. `backend_config.md`에 문서화된 모든 구성 변경 사항 적용
7. `backend_security.md`에 따라 보안 구현 업데이트
8. `backend_service.md`에 따라 서비스 컴포넌트 수정
9. `backend_file.md`에 각 파일에 대한 모든 변경 사항 기록

### 프론트엔드 변경 사항
1. TypeScript를 사용한 새로운 React 애플리케이션 생성
2. `front.md` 및 `front_list.md`에 설명된 대로 컴포넌트 구조 구현
3. `front_list.md`의 컴포넌트 마이그레이션 전략을 따라 핵심 컴포넌트부터 우선적으로 진행
4. 상태 관리에 Zustand 사용 (서버 측 세션 상태 대체)
5. API 통신에 React Query 및 Axios 사용
6. styled-components 또는 tailwindcss를 사용한 반응형 디자인 구현
7. `front_list.md`에 설명된 테스트 전략 따르기
8. `front_list.md`의 컴포넌트 상태 추적기를 사용하여 진행 상황 관리

### 데이터베이스 변경 사항
1. Oracle에서 PostgreSQL로 마이그레이션
2. 테이블 구조 및 인덱스 최적화
3. MyBatis 매퍼의 데이터베이스 쿼리 업데이트

## 구현 전략
1. 프론트엔드와 백엔드 모두에 대한 기본 프로젝트 구조 설정으로 시작
2. `front_list.md`의 우선순위 순서에 따라 먼저 공통 컴포넌트 및 유틸리티 구현
3. 이미 문서화된 컴포넌트를 우선적으로 핵심 기능을 모듈별로 마이그레이션
4. 다음으로 backend_file.md에 "아직 문서화가 필요한 파일"로 나열된 파일에 집중
5. 마이그레이션된 각 모듈에 대한 종합적인 테스트 구현
6. 자동화된 테스트 및 배포를 위한 CI/CD 파이프라인 설정

## 특정 작업

### 백엔드 작업
1. `backend.md`에 정의된 구조로 새로운 Spring Boot 프로젝트 생성
2. `backend_security.md`에 따른 JWT 인증 구현
3. 기존 컨트롤러를 REST 컨트롤러로 변환
4. `backend_service.md` 지침에 따라 REST 컨트롤러와 함께 작동하도록 서비스 계층 업데이트
5. `backend_config.md`에 문서화된 캐싱, Redis 및 Elasticsearch 구성 구현
6. 문서화된 모든 애플리케이션 이벤트 리스너 적용
7. 환경별 설정 구성
8. PostgreSQL을 위한 MyBatis로 데이터베이스 접근 최적화
9. 적절한 오류 처리 및 응답 형식 구현
10. `backend_file.md`에 각 파일에 대한 모든 변경 사항 기록

### 프론트엔드 작업
1. TypeScript를 사용한 새로운 React 프로젝트 설정
2. `front.md` 및 `front_list.md`에 정의된 대로 컴포넌트 구조 구현
3. 레이아웃 및 공통 컴포넌트부터 시작 (`front_list.md`의 1단계)
4. 게시판, 일정, 사용자 관리 컴포넌트로 진행 (2단계)
5. 메일, 결재, 프로젝트 컴포넌트로 계속 진행 (3단계)
6. 관리자 기능, 검색, 유틸리티로 마무리 (4단계)
7. Zustand를 사용한 상태 관리 구현
8. React Query 및 Axios를 사용한 API 통신 설정
9. 반응형 디자인 구현
10. `front_list.md`에 설명된 대로 종합적인 테스트 추가
11. 컴포넌트 상태 추적기를 사용하여 진행 상황 관리

## 일정
`outline.md`에 설명된 일정을 따르며, `front_list.md`의 단계별 접근 방식에 따른 프론트엔드 작업을 진행합니다:
1. 1단계: 기반 (4주)
   - 개발 환경 설정
   - 공통 컴포넌트 개발 (`front_list.md`의 1단계)
   - 데이터베이스 마이그레이션 준비
2. 2단계: 핵심 기능 (8주)
   - 인증/권한 부여
   - 게시판 기능 (`front_list.md`의 2단계)
   - 일정 관리
   - 메일 시스템 (`front_list.md`의 3단계 시작)
3. 3단계: 추가 기능 (4주)
   - 관리자 기능 (`front_list.md`의 4단계)
   - 통계/보고서
   - 시스템 모니터링
4. 4단계: 안정화 (2주)
   - 통합 테스트
   - 성능 최적화
   - 사용자 매뉴얼 작성

## 품질 보증
1. `front_list.md`에 설명된 대로 프론트엔드와 백엔드 모두에 대한 단위 테스트 구현
2. Cypress 또는 Playwright를 사용한 엔드-투-엔드 테스트 설정
3. 성능 테스트 수행
4. 보안 모범 사례 준수 확인
5. 접근성 준수 검증

## 위험 관리
1. 기술적 위험
   - 레거시 코드 의존성
   - 데이터 마이그레이션 과제
   - 성능 문제
2. 운영상 위험
   - 서비스 중단 최소화
   - 롤백 계획
   - 사용자 교육

## 진행 상황 추적
1. 백엔드 파일 마이그레이션 진행 상황을 추적하기 위해 backend_file.md 사용
2. 프론트엔드 추적을 위해 front_list.md의 컴포넌트 완료 체크리스트 사용
3. 작업이 진행됨에 따라 문서 업데이트
4. 발생한 문제와 해결책 문서화

이미 문서화된 컴포넌트부터 시작하여 아직 문서화가 필요한 컴포넌트로 이동하면서 이 마이그레이션 계획을 단계별로 구현하는 데 도움을 주세요.