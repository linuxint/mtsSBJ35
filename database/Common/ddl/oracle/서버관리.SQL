-- 서버 하드웨어 관리
CREATE TABLE TBL_SRV_HW (
    HW_ID               NUMBER(19)  NOT NULL,  -- 서버 하드웨어 PK
    HW_NAME             VARCHAR2(200) NOT NULL,        -- 서버 하드웨어명
    HW_IP               VARCHAR2(20),                  -- 서버 하드웨어 IP
    ADMIN_USER_NO       NUMBER(10),                    -- 관리자 (COM_USER.USERNO 참조)
    ADMIN_EMAIL         VARCHAR2(100),                 -- 관리자 이메일 주소
    OS_INFO             VARCHAR2(200),                -- OS 정보
    CPU_INFO            VARCHAR2(200),                -- CPU 정보
    MEMORY_INFO         VARCHAR2(200),                -- 메모리 정보
    DISK_INFO           VARCHAR2(200),                -- 하드디스크 정보
    ETC_INFO            VARCHAR2(4000),               -- 기타 정보
    ACT_YN              CHAR(1) DEFAULT 'Y' NOT NULL, -- 활성 여부 ('Y', 'N')
    DELETEFLAG          CHAR(1) DEFAULT 'N' NOT NULL, -- 삭제 여부 ('N', 'Y')
    REGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 등록일자
    REGUSERNO           NUMBER(10),          -- 등록자 (COM_USER.USERNO 참조)
    CHGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP, -- 마지막 수정일자
    CHGUSERNO           NUMBER(10),                   -- 마지막 수정자 (COM_USER.USERNO 참조)
    CONSTRAINT PK_TBL_SRV_HW PRIMARY KEY (HW_ID),
    CONSTRAINT CK_TBL_SRV_HW_ACT_YN CHECK (ACT_YN IN ('Y', 'N')) -- 활성 여부 값 제한
);
COMMENT ON TABLE TBL_SRV_HW IS '서버 하드웨어 관리';
COMMENT ON COLUMN TBL_SRV_HW.HW_ID IS '서버 하드웨어 PK';
COMMENT ON COLUMN TBL_SRV_HW.HW_NAME IS '서버 하드웨어명';
COMMENT ON COLUMN TBL_SRV_HW.HW_IP IS '서버 하드웨어 IP';
COMMENT ON COLUMN TBL_SRV_HW.ADMIN_USER_NO IS '관리자';
COMMENT ON COLUMN TBL_SRV_HW.ADMIN_EMAIL IS '관리자 이메일 주소';
COMMENT ON COLUMN TBL_SRV_HW.OS_INFO IS 'OS 정보';
COMMENT ON COLUMN TBL_SRV_HW.CPU_INFO IS 'CPU 정보';
COMMENT ON COLUMN TBL_SRV_HW.MEMORY_INFO IS '메모리 정보';
COMMENT ON COLUMN TBL_SRV_HW.DISK_INFO IS '하드디스크 정보';
COMMENT ON COLUMN TBL_SRV_HW.ETC_INFO IS '기타 정보';
COMMENT ON COLUMN TBL_SRV_HW.ACT_YN IS '활성 여부 ("Y" 또는 "N")';
COMMENT ON COLUMN TBL_SRV_HW.DELETEFLAG IS '삭제 여부 ("N" 또는 "Y")';
COMMENT ON COLUMN TBL_SRV_HW.REGDATE IS '등록일자';
COMMENT ON COLUMN TBL_SRV_HW.REGUSERNO IS '등록자';
COMMENT ON COLUMN TBL_SRV_HW.CHGDATE IS '마지막 수정일자';
COMMENT ON COLUMN TBL_SRV_HW.CHGUSERNO IS '마지막 수정자';

CREATE SEQUENCE HW_ID_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE NOCYCLE CACHE 10;

-- 서버 소프트웨어 관리
CREATE TABLE TBL_SRV_SW (
    SW_ID               NUMBER(19) NOT NULL,  -- 서버 소프트웨어 PK
    HW_ID               NUMBER(19) NOT NULL,                -- 서버 하드웨어 FK (TBL_SRV_HW.HW_ID 참조)
    SW_NAME             VARCHAR2(200) NOT NULL,            -- 서버 소프트웨어명
    SW_TYPE_CD          VARCHAR2(10),             -- 소프트웨어 종류 코드 (COM_CODE.CODECD 참조)
    ACT_YN              CHAR(1) DEFAULT 'Y' NOT NULL,      -- 활성 여부 ('Y', 'N')
    DELETEFLAG          CHAR(1) DEFAULT 'N' NOT NULL, -- 삭제 여부 ('N', 'Y')
    REGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 등록일자
    REGUSERNO           NUMBER(10),               -- 등록자 (COM_USER.USERNO 참조)
    CHGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 마지막 수정일자
    CHGUSERNO           NUMBER(10),               -- 마지막 수정자 (COM_USER.USERNO 참조)
    CONSTRAINT PK_TBL_SRV_SW PRIMARY KEY (SW_ID),
    CONSTRAINT CK_TBL_SRV_SW_ACT_YN CHECK (ACT_YN IN ('Y', 'N')) -- 활성 여부 값 제한
--,CONSTRAINT FK_TBL_SRV_SW_HW FOREIGN KEY (HW_ID) REFERENCES TBL_SRV_HW(HW_ID)
);
COMMENT ON TABLE TBL_SRV_SW IS '서버 소프트웨어 관리';
COMMENT ON COLUMN TBL_SRV_SW.SW_ID IS '서버 소프트웨어 PK';
COMMENT ON COLUMN TBL_SRV_SW.HW_ID IS '서버 하드웨어 ID';
COMMENT ON COLUMN TBL_SRV_SW.SW_NAME IS '서버 소프트웨어명';
COMMENT ON COLUMN TBL_SRV_SW.SW_TYPE_CD IS '서버 소프트웨어 종류 코드';
COMMENT ON COLUMN TBL_SRV_SW.ACT_YN IS '활성 여부';
COMMENT ON COLUMN TBL_SRV_SW.DELETEFLAG IS '삭제 여부 ("N" 또는 "Y")';
COMMENT ON COLUMN TBL_SRV_SW.REGDATE IS '등록일자';
COMMENT ON COLUMN TBL_SRV_SW.REGUSERNO IS '등록자';
COMMENT ON COLUMN TBL_SRV_SW.CHGDATE IS '마지막 수정일자';
COMMENT ON COLUMN TBL_SRV_SW.CHGUSERNO IS '마지막 수정자';

CREATE INDEX IDX_TBL_SRV_SW_HW_ID ON TBL_SRV_SW(HW_ID);
-- ALTER TABLE TBL_SRV_SW ADD CONSTRAINT FK_TBL_SRV_SW_HW FOREIGN KEY (HW_ID) REFERENCES TBL_SRV_HW(HW_ID);

CREATE SEQUENCE SW_ID_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE NOCYCLE CACHE 10;

-- 서버 서비스 관리
CREATE TABLE TBL_SRV_SVC (
    SVC_ID              NUMBER(19) NOT NULL,  -- 서버 서비스 PK
    HW_ID               NUMBER(19) NOT NULL,       -- 서버 하드웨어 FK (TBL_SRV_HW.HW_ID 참조)
    SW_ID               NUMBER(19) NOT NULL,       -- 서버 소프트웨어 FK (SRV_SW.SW_ID 참조)
    SVC_NAME            VARCHAR2(200) NOT NULL,    -- 서비스명
    SVC_PORT            NUMBER(10),                -- 서비스 포트
    ACT_YN              CHAR(1) DEFAULT 'Y' NOT NULL, -- 활성 여부 ('Y', 'N')
    DELETEFLAG          CHAR(1) DEFAULT 'N' NOT NULL, -- 삭제 여부 ('N', 'Y')
    REGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 등록일자
    REGUSERNO           NUMBER(10),                -- 등록자 (COM_USER.USERNO 참조)
    CHGDATE             TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 마지막 수정일자
    CHGUSERNO           NUMBER(10),                -- 마지막 수정자 (COM_USER.USERNO 참조)
    CONSTRAINT PK_TBL_SRV_SVC PRIMARY KEY (SVC_ID),
    CONSTRAINT CK_TBL_SRV_SVC_ACT_YN CHECK (ACT_YN IN ('Y', 'N')) -- 활성 여부 값 제한
    --,CONSTRAINT FK_TBL_SRV_HW FOREIGN KEY (HW_ID) REFERENCES TBL_SRV_HW(HW_ID),
    --CONSTRAINT FK_TBL_SRV_SW FOREIGN KEY (SW_ID) REFERENCES TBL_SRV_SW(SW_ID)
);
COMMENT ON TABLE TBL_SRV_SVC IS '서버 서비스 관리';
COMMENT ON COLUMN TBL_SRV_SVC.SVC_ID IS '서버 서비스 PK';
COMMENT ON COLUMN TBL_SRV_SVC.HW_ID IS '서버 하드웨어 FK';
COMMENT ON COLUMN TBL_SRV_SVC.SW_ID IS '서버 소프트웨어 FK';
COMMENT ON COLUMN TBL_SRV_SVC.SVC_NAME IS '서버 서비스명';
COMMENT ON COLUMN TBL_SRV_SVC.SVC_PORT IS '서비스 포트';
COMMENT ON COLUMN TBL_SRV_SVC.ACT_YN IS '활성 여부';
COMMENT ON COLUMN TBL_SRV_SVC.DELETEFLAG IS '삭제 여부 ("N" 또는 "Y")';
COMMENT ON COLUMN TBL_SRV_SVC.REGDATE IS '등록일자';
COMMENT ON COLUMN TBL_SRV_SVC.REGUSERNO IS '등록자';
COMMENT ON COLUMN TBL_SRV_SVC.CHGDATE IS '마지막 수정일자';
COMMENT ON COLUMN TBL_SRV_SVC.CHGUSERNO IS '마지막 수정자';

CREATE INDEX IDX_SRV_SVC_HW_ID ON TBL_SRV_SVC(HW_ID);
CREATE INDEX IDX_SRV_SVC_SW_ID ON TBL_SRV_SVC(SW_ID);

-- ALTER TABLE TBL_SRV_SVC ADD CONSTRAINT FK_TBL_SRV_HW FOREIGN KEY (HW_ID) REFERENCES TBL_SRV_HW(HW_ID),
--        ADD CONSTRAINT FK_TBL_SRV_SW FOREIGN KEY (SW_ID) REFERENCES TBL_SRV_SW(SW_ID);

CREATE SEQUENCE SVC_ID_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE NOCYCLE CACHE 10;

-- 서버 서비스 접속 정보 관리
CREATE TABLE TBL_SRV_CONN (
    CONN_ID     NUMBER(19) NOT NULL,  -- 서버 서비스 접속 정보 PK
    SVC_ID      NUMBER(19) NOT NULL,  -- 서버 서비스 FK (SRV_SVC.SVC_ID 참조)
    CONN_NAME   VARCHAR2(100),  -- 서버 서비스명
    USER_NAME   VARCHAR2(100),  -- 접속자명
    USER_PW     VARCHAR2(100),  -- 접속자 비밀번호
    ACT_YN      CHAR(1) DEFAULT 'Y' NOT NULL, -- 활성 여부 ('Y', 'N')
    DELETEFLAG  CHAR(1) DEFAULT 'N' NOT NULL, -- 삭제 여부 ('N', 'Y')
    REGDATE     TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP, -- 등록일자
    REGUSERNO   NUMBER(10), -- 등록자 (COM_USER.USERNO 참조)
    CHGDATE     TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP, -- 마지막 수정일자
    CHGUSERNO   NUMBER(10), -- 마지막 수정자 (COM_USER.USERNO 참조)
    CONSTRAINT PK_TBL_SRV_CONN PRIMARY KEY (CONN_ID)
    ,CONSTRAINT CK_TBL_SRV_CONN_ACT_YN CHECK (ACT_YN IN ('Y', 'N')) -- 활성 여부 값 제한
    --, CONSTRAINT FK_TBL_SRV_CONN FOREIGN KEY (SVC_ID) REFERENCES TBL_SRV_SVC(SVC_ID)
);
COMMENT ON TABLE TBL_SRV_CONN IS '서버 서비스 접속 정보 관리';
COMMENT ON COLUMN TBL_SRV_CONN.CONN_ID IS '서버 서비스 접속 정보 PK';
COMMENT ON COLUMN TBL_SRV_CONN.SVC_ID IS '서버 서비스 FK';
COMMENT ON COLUMN TBL_SRV_CONN.CONN_NAME IS '서버 서비스명';
COMMENT ON COLUMN TBL_SRV_CONN.USER_NAME IS '접속자명';
COMMENT ON COLUMN TBL_SRV_CONN.USER_PW IS '접속 비밀번호 (암호화 필요)';
COMMENT ON COLUMN TBL_SRV_CONN.ACT_YN IS '활성 여부';
COMMENT ON COLUMN TBL_SRV_CONN.DELETEFLAG IS '삭제 여부 ("N" 또는 "Y")';
COMMENT ON COLUMN TBL_SRV_CONN.REGDATE IS '등록일자';
COMMENT ON COLUMN TBL_SRV_CONN.REGUSERNO IS '등록자';
COMMENT ON COLUMN TBL_SRV_CONN.CHGDATE IS '마지막 수정일자';
COMMENT ON COLUMN TBL_SRV_CONN.CHGUSERNO IS '마지막 수정자';

CREATE INDEX IDX_TBL_SRV_CONN_SVC_ID ON TBL_SRV_CONN(SVC_ID);
-- ALTER TABLE TBL_SRV_CONN ADD CONSTRAINT FK_TBL_SRV_CONN FOREIGN KEY (SVC_ID) REFERENCES TBL_SRV_SVC(SVC_ID);

CREATE SEQUENCE CONN_ID_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE NOCYCLE CACHE 10;

-- 서버 서비스 기타 정보 관리
CREATE TABLE TBL_SRV_ETC (
    ETC_ID     NUMBER(19) NOT NULL, -- 서버 서비스 기타 정보 PK
    CONN_ID    NUMBER(19) NOT NULL, -- 서버 서비스 접속 정보 FK (SRV_CONN.CONN_ID 참조)
    ETC_NAME   VARCHAR2(100),       -- 기타 정보명
    ETC_DATA   VARCHAR2(4000),      -- 기타 정보 데이터
    ACT_YN     CHAR(1) DEFAULT 'Y' NOT NULL, -- 활성 여부 ('Y', 'N')
    DELETEFLAG CHAR(1) DEFAULT 'N' NOT NULL, -- 삭제 여부 ('N', 'Y')
    REGDATE    TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 등록일자
    REGUSERNO  NUMBER(10),               -- 등록자 (COM_USER.USERNO 참조)
    CHGDATE    TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL, -- 마지막 수정일자
    CHGUSERNO  NUMBER(10),               -- 마지막 수정자 (COM_USER.USERNO 참조)
    CONSTRAINT PK_TBL_SRV_ETC PRIMARY KEY (ETC_ID)
    --,CONSTRAINT FK_TBL_SRV_ETC FOREIGN KEY (CONN_ID) REFERENCES TBL_SRV_CONN(CONN_ID)
);

COMMENT ON TABLE TBL_SRV_ETC IS '서버 서비스 기타 정보 관리';
COMMENT ON COLUMN TBL_SRV_ETC.ETC_ID IS '서버 서비스 기타 정보 PK';
COMMENT ON COLUMN TBL_SRV_ETC.CONN_ID IS '서버 서비스 접속 정보 FK';
COMMENT ON COLUMN TBL_SRV_ETC.ETC_NAME IS '기타 정보명';
COMMENT ON COLUMN TBL_SRV_ETC.ETC_DATA IS '기타 정보 데이터';
COMMENT ON COLUMN TBL_SRV_ETC.ACT_YN IS '활성 여부';;
COMMENT ON COLUMN TBL_SRV_ETC.DELETEFLAG IS '삭제 여부 ("N" 또는 "Y")';
COMMENT ON COLUMN TBL_SRV_ETC.REGDATE IS '등록일자';
COMMENT ON COLUMN TBL_SRV_ETC.REGUSERNO IS '등록자';
COMMENT ON COLUMN TBL_SRV_ETC.CHGDATE IS '마지막 수정일자';
COMMENT ON COLUMN TBL_SRV_ETC.CHGUSERNO IS '마지막 수정자';

CREATE INDEX IDX_TBL_SRV_ETC_CONN_ID ON TBL_SRV_ETC(CONN_ID);
-- ALTER TABLE TBL_SRV_ETC ADD CONSTRAINT FK_SRV_ETC FOREIGN KEY (CONN_ID) REFERENCES TBL_SRV_CONN(CONN_ID);

CREATE SEQUENCE ETC_ID_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE NOCYCLE CACHE 10;

-- DROP 문 생성 --
-- DROP SEQUENCE ETC_ID_SEQ;
-- DROP TABLE TBL_SRV_ETC;
-- DROP INDEX IDX_TBL_SRV_ETC_CONN_ID;
--
-- DROP SEQUENCE CONN_ID_SEQ;
-- DROP TABLE TBL_SRV_CONN;
-- DROP INDEX IDX_TBL_SRV_CONN_SVC_ID;
--
-- DROP SEQUENCE SVC_ID_SEQ;
-- DROP TABLE TBL_SRV_SVC;
-- DROP INDEX IDX_SRV_SVC_HW_ID;
-- DROP INDEX IDX_SRV_SVC_SW_ID;
--
-- DROP SEQUENCE SW_ID_SEQ;
-- DROP TABLE TBL_SRV_SW;
-- DROP INDEX IDX_TBL_SRV_SW_HW_ID;
--
-- DROP SEQUENCE HW_ID_SEQ;
-- DROP TABLE TBL_SRV_HW;